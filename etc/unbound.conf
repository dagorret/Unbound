server:
  verbosity: 1                         # Nivel de detalle de los logs. 1 = advertencias m√≠nimas
  interface: 0.0.0.0                   # Escucha en todas las interfaces del contenedor
  port: 53                             # Puerto interno (expuesto como 5335 en el host)
  do-ip4: yes
  do-ip6: no                           # IPv6 desactivado por simplicidad
  do-udp: yes
  do-tcp: yes
  access-control: 0.0.0.0/0 allow      # Permitir consultas desde cualquier IP de la red local

  root-hints: "root.hints"            # Archivo con direcciones de los root servers
  auto-trust-anchor-file: "/var/lib/unbound/root.key"  # DNSSEC trust anchor

  # ‚öôÔ∏è Rendimiento optimizado
  num-threads: 2
  outgoing-range: 8192
  num-queries-per-thread: 4096
  so-rcvbuf: 4m
  so-sndbuf: 4m
  incoming-num-tcp: 100
  outgoing-num-tcp: 100

  # üß† Cache agresiva
  msg-cache-size: 128m
  rrset-cache-size: 256m
  key-cache-size: 64m
  cache-min-ttl: 3600                 # TTL m√≠nimo: 1 hora, incluso si es menor
  cache-max-negative-ttl: 600
  prefetch: yes
  prefetch-key: yes
  rrset-roundrobin: yes

  # üõ∞Ô∏è Latencia m√≠nima
  qname-minimisation: yes             # Evita filtrar datos innecesarios en el camino
  aggressive-nsec: yes                # Optimiza las respuestas negativas de forma m√°s veloz

  # üîê Seguridad y privacidad
  hide-identity: yes
  hide-version: yes
  use-caps-for-id: yes
  harden-glue: yes
  harden-dnssec-stripped: yes
  harden-referral-path: yes
  val-clean-additional: yes
  val-log-level: 0

  # üì¥ Logs desactivados por defecto para velocidad
  logfile: "/dev/null"
  log-queries: no
  log-replies: no
  log-servfail: no

remote-control:
  control-enable: yes
  control-interface: 127.0.0.1
  control-port: 8953
  server-key-file: "/etc/unbound/unbound_server.key"
  server-cert-file: "/etc/unbound/unbound_server.pem"
  control-key-file: "/etc/unbound/unbound_control.key"
  control-cert-file: "/etc/unbound/unbound_control.pem"
